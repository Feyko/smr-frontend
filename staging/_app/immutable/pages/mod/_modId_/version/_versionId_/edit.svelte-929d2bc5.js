import{S as C,i as H,s as M,ba as Z,u as j,ad as F,b as T,a as N,e as _,aa as b,Z as I,aT as G,f as c,g as O,c as q,d as z,ab as y,_ as w,a7 as J,a5 as V,j as h,$ as S,m as g,t as v,l as D,ae as K,a1 as P,aC as Q,al as U,aB as W,aD as X,bb as Y,k as R,ac as A,q as x}from"../../../../../chunks/vendor-3906a87e.js";import{p as tt}from"../../../../../chunks/routing-c6322149.js";import{z as et,B as rt}from"../../../../../chunks/graphql-c174641c.js";import{T as nt}from"../../../../../chunks/Toast-2c4756ef.js";import{g as ot}from"../../../../../chunks/navigation-ce539261.js";import{V as it}from"../../../../../chunks/VersionForm-2db7130f.js";import{b as at}from"../../../../../chunks/paths-1c47712a.js";import{M as st}from"../../../../../chunks/MetaDescriptors-3bdad2d4.js";import"../../../../../chunks/singletons-cdeec3fd.js";import"../../../../../chunks/forms-a08ac836.js";import"../../../../../chunks/jszip-0721729d.js";import"../../../../../chunks/extras-8984d02f.js";import"../../../../../chunks/uplugin-9e82fa30.js";import"../../../../../chunks/api-bb6d5972.js";import"../../../../../chunks/user-d8fd3640.js";import"../../../../../chunks/forms-d082c50e.js";import"../../../../../chunks/markdown-6a2ff7f0.js";import"../../../../../chunks/formatting-b1e7d458.js";import"../../../../../chunks/stores-656a72dd.js";function k(i){let e,r;return e=new st({props:{description:"Editing mod version "+i[1].data.getVersion.mod.name+" "+i[1].data.getVersion.version,title:"Edit mod version "+i[1].data.getVersion.mod.name+" "+i[1].data.getVersion.version}}),{c(){I(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const f={};n&2&&(f.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),n&2&&(f.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function ft(i){let e,r;return e=new it({props:{onSubmit:i[5],initialValues:i[3],modReference:i[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){I(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const f={};n&8&&(f.initialValues=t[3]),n&2&&(f.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function dt(i){let e,r,t=i[1].error.message+"",n;return{c(){e=_("p"),r=b("Oh no... "),n=b(t)},l(f){e=q(f,"P",{});var s=z(e);r=y(s,"Oh no... "),n=y(s,t),s.forEach(c)},m(f,s){h(f,e,s),V(e,r),V(e,n)},p(f,s){s&2&&t!==(t=f[1].error.message+"")&&A(n,t)},i:x,o:x,d(f){f&&c(e)}}}function mt(i){let e,r;return{c(){e=_("p"),r=b("Loading...")},l(t){e=q(t,"P",{});var n=z(e);r=y(n,"Loading..."),n.forEach(c)},m(t,n){h(t,e,n),V(e,r)},p:x,i:x,o:x,d(t){t&&c(e)}}}function lt(i){let e,r,t,n;const f=[mt,dt,ft],s=[];function u(a,l){return a[1].fetching?0:a[1].error?1:2}return e=u(i),r=s[e]=f[e](i),{c(){r.c(),t=T()},l(a){r.l(a),t=T()},m(a,l){s[e].m(a,l),h(a,t,l),n=!0},p(a,l){let p=e;e=u(a),e===p?s[e].p(a,l):(R(),v(s[p],1,1,()=>{s[p]=null}),D(),r=s[e],r?r.p(a,l):(r=s[e]=f[e](a),r.c()),g(r,1),r.m(t.parentNode,t))},i(a){n||(g(r),n=!0)},o(a){v(r),n=!1},d(a){s[e].d(a),a&&c(t)}}}function ct(i){let e,r;return e=new Y({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const f={};n&1034&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){v(e.$$.fragment,t),r=!1},d(t){P(e,t)}}}function $t(i){let e,r;return{c(){e=_("span"),r=b(i[2])},l(t){e=q(t,"SPAN",{});var n=z(e);r=y(n,i[2]),n.forEach(c)},m(t,n){h(t,e,n),V(e,r)},p(t,n){n&4&&A(r,t[2])},d(t){t&&c(e)}}}function ut(i){let e,r,t,n,f,s,u,a,l,p,d=!i[1].fetching&&!i[1].error&&i[1].data.getVersion&&k(i);s=new Z({props:{$$slots:{default:[ct]},$$scope:{ctx:i}}});function B(o){i[8](o)}let $={$$slots:{default:[$t]},$$scope:{ctx:i}};return i[0]!==void 0&&($.running=i[0]),a=new nt({props:$}),j.push(()=>F(a,"running",B)),{c(){d&&d.c(),e=T(),r=N(),t=_("h1"),n=b("Edit Version"),f=N(),I(s.$$.fragment),u=N(),I(a.$$.fragment),this.h()},l(o){const m=G('[data-svelte="svelte-wzsk0g"]',document.head);d&&d.l(m),e=T(),m.forEach(c),r=O(o),t=q(o,"H1",{class:!0});var E=z(t);n=y(E,"Edit Version"),E.forEach(c),f=O(o),w(s.$$.fragment,o),u=O(o),w(a.$$.fragment,o),this.h()},h(){J(t,"class","text-4xl my-4 font-bold")},m(o,m){d&&d.m(document.head,null),V(document.head,e),h(o,r,m),h(o,t,m),V(t,n),h(o,f,m),S(s,o,m),h(o,u,m),S(a,o,m),p=!0},p(o,[m]){!o[1].fetching&&!o[1].error&&o[1].data.getVersion?d?(d.p(o,m),m&2&&g(d,1)):(d=k(o),d.c(),g(d,1),d.m(e.parentNode,e)):d&&(R(),v(d,1,1,()=>{d=null}),D());const E={};m&1034&&(E.$$scope={dirty:m,ctx:o}),s.$set(E);const L={};m&1028&&(L.$$scope={dirty:m,ctx:o}),!l&&m&1&&(l=!0,L.running=o[0],K(()=>l=!1)),a.$set(L)},i(o){p||(g(d),g(s.$$.fragment,o),g(a.$$.fragment,o),p=!0)},o(o){v(d),v(s.$$.fragment,o),v(a.$$.fragment,o),p=!1},d(o){d&&d.d(o),c(e),o&&c(r),o&&c(t),o&&c(f),P(s,o),o&&c(u),P(a,o)}}}const Ot=tt();function pt(i,e,r){let t,n,{modId:f}=e,{versionId:s}=e,u="",a=!1;const l=Q(et,{version:s});U(i,l,$=>r(1,n=$));const p=W({query:rt}),d=async $=>p({versionId:s,version:$}).then(o=>{if(o.error)console.error(o.error.message),r(2,u="Error editing version: "+o.error.message),r(0,a=!0);else return ot(at+"/mod/"+f+"/version/"+s)});X(l);function B($){a=$,r(0,a)}return i.$$set=$=>{"modId"in $&&r(6,f=$.modId),"versionId"in $&&r(7,s=$.versionId)},i.$$.update=()=>{i.$$.dirty&1&&(a||r(2,u="")),i.$$.dirty&2&&r(3,t=n.data?{...n.data.getVersion,logo:void 0}:void 0)},[a,n,u,t,l,d,f,s,B]}class kt extends C{constructor(e){super(),H(this,e,pt,ut,M,{modId:6,versionId:7})}}export{kt as default,Ot as load};
//# sourceMappingURL=edit.svelte-929d2bc5.js.map
