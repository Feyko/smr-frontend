import{S as le,i as me,d as v,Z as pe,bf as W,s as $e,a7 as y,a8 as k,a9 as S,u as g,t as h,ab as R,bg as X,y as ge,ae as he,g as M,f as z,e as j,af as B,b0 as ve,k as p,l as D,h as C,j as _,ag as P,ac as we,n as N,ad as E,p as I,r as Y,ai as Ie,v as Ee,aH as L,am as Ve,an as be,aG as A,aI as U,q as ee,ah as te,x}from"../../../../../chunks/vendor-71586dff.js";import{p as oe}from"../../../../../chunks/routing-3e924f8c.js";import{y as Z,z as J}from"../../../../../chunks/graphql-587ea9ba.js";import{T as ne}from"../../../../../chunks/Toast-a744ab82.js";import{g as K}from"../../../../../chunks/navigation-fe373893.js";import{V as ie}from"../../../../../chunks/VersionForm-d9241568.js";import{b as Q}from"../../../../../chunks/paths-396f020f.js";import{M as re}from"../../../../../chunks/MetaDescriptors-f6373408.js";import"../../../../../chunks/singletons-d1fb5791.js";import"../../../../../chunks/forms-a767280e.js";import"../../../../../chunks/jszip-581b0412.js";import"../../../../../chunks/extras-71f1917d.js";import"../../../../../chunks/uplugin-726ef6b7.js";import"../../../../../chunks/api-914d5f30.js";import"../../../../../chunks/user-aa766597.js";import"../../../../../chunks/forms-5941be64.js";import"../../../../../chunks/markdown-bc68363c.js";import"../../../../../chunks/formatting-a4ea5227.js";import"../../../../../chunks/stores-b24fbbcb.js";const{console:F}=pe,O="src/routes/mod/[modId]/version/[versionId]/edit.svelte";function G(s){let e,n;e=new re({props:{description:"Editing mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version,title:"Edit mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version},$$inline:!0});const a={c:function(){y(e.$$.fragment)},l:function(t){k(e.$$.fragment,t)},m:function(t,r){S(e,t,r),n=!0},p:function(t,r){const c={};r&2&&(c.description="Editing mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),r&2&&(c.title="Edit mod version "+t[1].data.getVersion.mod.name+" "+t[1].data.getVersion.version),e.$set(c)},i:function(t){n||(g(e.$$.fragment,t),n=!0)},o:function(t){h(e.$$.fragment,t),n=!1},d:function(t){R(e,t)}};return v("SvelteRegisterBlock",{block:a,id:G.name,type:"if",source:"(48:2) {#if !$version.fetching && !$version.error && $version.data.getVersion}",ctx:s}),a}function se(s){let e,n;e=new ie({props:{onSubmit:s[5],initialValues:s[3],modReference:s[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"},$$inline:!0});const a={c:function(){y(e.$$.fragment)},l:function(t){k(e.$$.fragment,t)},m:function(t,r){S(e,t,r),n=!0},p:function(t,r){const c={};r&8&&(c.initialValues=t[3]),r&2&&(c.modReference=t[1].data.getVersion.mod.mod_reference),e.$set(c)},i:function(t){n||(g(e.$$.fragment,t),n=!0)},o:function(t){h(e.$$.fragment,t),n=!1},d:function(t){R(e,t)}};return v("SvelteRegisterBlock",{block:a,id:se.name,type:"else",source:"(63:4) {:else}",ctx:s}),a}function ae(s){let e,n,a=s[1].error.message+"",i;const t={c:function(){e=j("p"),n=B("Oh no... "),i=B(a),this.h()},l:function(c){e=C(c,"P",{});var d=_(e);n=P(d,"Oh no... "),i=P(d,a),d.forEach(p),this.h()},h:function(){N(e,O,61,6,1975)},m:function(c,d){I(c,e,d),E(e,n),E(e,i)},p:function(c,d){d&2&&a!==(a=c[1].error.message+"")&&te(i,a)},i:x,o:x,d:function(c){c&&p(e)}};return v("SvelteRegisterBlock",{block:t,id:ae.name,type:"if",source:"(61:29) ",ctx:s}),t}function ce(s){let e,n;const a={c:function(){e=j("p"),n=B("Loading..."),this.h()},l:function(t){e=C(t,"P",{});var r=_(e);n=P(r,"Loading..."),r.forEach(p),this.h()},h:function(){N(e,O,59,6,1921)},m:function(t,r){I(t,e,r),E(e,n)},p:x,i:x,o:x,d:function(t){t&&p(e)}};return v("SvelteRegisterBlock",{block:a,id:ce.name,type:"if",source:"(59:4) {#if $version.fetching}",ctx:s}),a}function fe(s){let e,n,a,i;const t=[ce,ae,se],r=[];function c(m,u){return m[1].fetching?0:m[1].error?1:2}e=c(s),n=r[e]=t[e](s);const d={c:function(){n.c(),a=M()},l:function(u){n.l(u),a=M()},m:function(u,f){r[e].m(u,f),I(u,a,f),i=!0},p:function(u,f){let w=e;e=c(u),e===w?r[e].p(u,f):(ee(),h(r[w],1,1,()=>{r[w]=null}),Y(),n=r[e],n?n.p(u,f):(n=r[e]=t[e](u),n.c()),g(n,1),n.m(a.parentNode,a))},i:function(u){i||(g(n),i=!0)},o:function(u){h(n),i=!1},d:function(u){r[e].d(u),u&&p(a)}};return v("SvelteRegisterBlock",{block:d,id:fe.name,type:"slot",source:"(58:2) <Content>",ctx:s}),d}function de(s){let e,n;e=new X({props:{$$slots:{default:[fe]},$$scope:{ctx:s}},$$inline:!0});const a={c:function(){y(e.$$.fragment)},l:function(t){k(e.$$.fragment,t)},m:function(t,r){S(e,t,r),n=!0},p:function(t,r){const c={};r&1034&&(c.$$scope={dirty:r,ctx:t}),e.$set(c)},i:function(t){n||(g(e.$$.fragment,t),n=!0)},o:function(t){h(e.$$.fragment,t),n=!1},d:function(t){R(e,t)}};return v("SvelteRegisterBlock",{block:a,id:de.name,type:"slot",source:"(57:0) <Card>",ctx:s}),a}function ue(s){let e,n;const a={c:function(){e=j("span"),n=B(s[2]),this.h()},l:function(t){e=C(t,"SPAN",{});var r=_(e);n=P(r,s[2]),r.forEach(p),this.h()},h:function(){N(e,O,74,2,2276)},m:function(t,r){I(t,e,r),E(e,n)},p:function(t,r){r&4&&te(n,t[2])},d:function(t){t&&p(e)}};return v("SvelteRegisterBlock",{block:a,id:ue.name,type:"slot",source:"(74:0) <Toast bind:running={errorToast}>",ctx:s}),a}function H(s){let e,n,a,i,t,r,c,d,m,u,f=!s[1].fetching&&!s[1].error&&s[1].data.getVersion&&G(s);r=new W({props:{$$slots:{default:[de]},$$scope:{ctx:s}},$$inline:!0});function w($){s[8]($)}let V={$$slots:{default:[ue]},$$scope:{ctx:s}};s[0]!==void 0&&(V.running=s[0]),d=new ne({props:V,$$inline:!0}),ge.push(()=>he(d,"running",w));const T={c:function(){f&&f.c(),e=M(),n=z(),a=j("h1"),i=B("Edit Version"),t=z(),y(r.$$.fragment),c=z(),y(d.$$.fragment),this.h()},l:function(o){const l=ve('[data-svelte="svelte-wzsk0g"]',document.head);f&&f.l(l),e=M(),l.forEach(p),n=D(o),a=C(o,"H1",{class:!0});var b=_(a);i=P(b,"Edit Version"),b.forEach(p),t=D(o),k(r.$$.fragment,o),c=D(o),k(d.$$.fragment,o),this.h()},h:function(){we(a,"class","text-4xl my-4 font-bold"),N(a,O,54,0,1813)},m:function(o,l){f&&f.m(document.head,null),E(document.head,e),I(o,n,l),I(o,a,l),E(a,i),I(o,t,l),S(r,o,l),I(o,c,l),S(d,o,l),u=!0},p:function(o,[l]){!o[1].fetching&&!o[1].error&&o[1].data.getVersion?f?(f.p(o,l),l&2&&g(f,1)):(f=G(o),f.c(),g(f,1),f.m(e.parentNode,e)):f&&(ee(),h(f,1,1,()=>{f=null}),Y());const b={};l&1034&&(b.$$scope={dirty:l,ctx:o}),r.$set(b);const q={};l&1028&&(q.$$scope={dirty:l,ctx:o}),!m&&l&1&&(m=!0,q.running=o[0],Ie(()=>m=!1)),d.$set(q)},i:function(o){u||(g(f),g(r.$$.fragment,o),g(d.$$.fragment,o),u=!0)},o:function(o){h(f),h(r.$$.fragment,o),h(d.$$.fragment,o),u=!1},d:function(o){f&&f.d(o),p(e),o&&p(n),o&&p(a),o&&p(t),R(r,o),o&&p(c),R(d,o)}};return v("SvelteRegisterBlock",{block:T,id:H.name,type:"component",source:"",ctx:s}),T}const xe=oe();function ye(s,e,n){let a,i,{$$slots:t={},$$scope:r}=e;Ee("Edit",t,[]);let{modId:c}=e,{versionId:d}=e,m="",u=!1;const f=L(Z,{version:d});Ve(f,"version"),be(s,f,o=>n(1,i=o));const w=A({query:J}),V=async o=>w({versionId:d,version:o}).then(l=>{if(l.error)console.error(l.error.message),n(2,m="Error editing version: "+l.error.message),n(0,u=!0);else return K(Q+"/mod/"+c+"/version/"+d)});U(f);const T=["modId","versionId"];Object.keys(e).forEach(o=>{!~T.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&F.warn(`<Edit> was created with unknown prop '${o}'`)});function $(o){u=o,n(0,u)}return s.$$set=o=>{"modId"in o&&n(6,c=o.modId),"versionId"in o&&n(7,d=o.versionId)},s.$capture_state=()=>({paramsToProps:oe,load:xe,mutation:A,operationStore:L,query:U,GetModVersionDocument:Z,UpdateVersionDocument:J,Toast:ne,goto:K,VersionForm:ie,base:Q,MetaDescriptors:re,Card:W,Content:X,modId:c,versionId:d,errorMessage:m,errorToast:u,version:f,editVersion:w,onSubmit:V,initialValues:a,$version:i}),s.$inject_state=o=>{"modId"in o&&n(6,c=o.modId),"versionId"in o&&n(7,d=o.versionId),"errorMessage"in o&&n(2,m=o.errorMessage),"errorToast"in o&&n(0,u=o.errorToast),"initialValues"in o&&n(3,a=o.initialValues)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1&&(u||n(2,m="")),s.$$.dirty&2&&n(3,a=i.data?{...i.data.getVersion,logo:void 0}:void 0)},[u,i,m,a,f,V,c,d,$]}class Ae extends le{constructor(e){super(e),me(this,e,ye,H,$e,{modId:6,versionId:7}),v("SvelteRegisterComponent",{component:this,tagName:"Edit",options:e,id:H.name});const{ctx:n}=this.$$,a=e.props||{};n[6]===void 0&&!("modId"in a)&&F.warn("<Edit> was created without expected prop 'modId'"),n[7]===void 0&&!("versionId"in a)&&F.warn("<Edit> was created without expected prop 'versionId'")}get modId(){throw new Error("<Edit>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set modId(e){throw new Error("<Edit>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get versionId(){throw new Error("<Edit>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set versionId(e){throw new Error("<Edit>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Ae as default,xe as load};
//# sourceMappingURL=edit.svelte-11f6c079.js.map
