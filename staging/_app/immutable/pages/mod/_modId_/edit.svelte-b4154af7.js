import{S as B,i as H,s as Z,ba as _,u as F,ad as G,b as T,a as z,e as L,aa as I,Z as q,aT as J,f as l,g as C,c as O,d as P,ab as w,_ as M,a7 as K,a5 as b,j as E,$ as S,m as g,t as h,l as j,ae as Q,a1 as N,aC as R,al as U,aB as W,aD as X,bb as Y,k,az as ee,ac as A,q as y}from"../../../chunks/vendor-3906a87e.js";import{p as re}from"../../../chunks/routing-c6322149.js";import{p as te,q as ae}from"../../../chunks/graphql-c174641c.js";import{T as oe}from"../../../chunks/Toast-2c4756ef.js";import{g as ie}from"../../../chunks/navigation-ce539261.js";import{M as ne}from"../../../chunks/ModForm-2075f3e4.js";import{b as se}from"../../../chunks/paths-1c47712a.js";import{M as fe}from"../../../chunks/MetaDescriptors-3bdad2d4.js";import"../../../chunks/singletons-cdeec3fd.js";import"../../../chunks/forms-a08ac836.js";import"../../../chunks/forms-d082c50e.js";import"../../../chunks/markdown-6a2ff7f0.js";import"../../../chunks/extras-8984d02f.js";import"../../../chunks/ModCompatibilityEdit-8bf9139b.js";import"../../../chunks/stores-656a72dd.js";function D(i){let r,t;return r=new fe({props:{description:"Editing mod "+i[1].data.mod.name,title:"Edit mod "+i[1].data.mod.name,image:i[1].data.mod.logo}}),{c(){q(r.$$.fragment)},l(e){M(r.$$.fragment,e)},m(e,a){S(r,e,a),t=!0},p(e,a){const s={};a&2&&(s.description="Editing mod "+e[1].data.mod.name),a&2&&(s.title="Edit mod "+e[1].data.mod.name),a&2&&(s.image=e[1].data.mod.logo),r.$set(s)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){N(r,e)}}}function de(i){let r,t;return r=new ne({props:{onSubmit:i[5],initialValues:i[3],editing:!0,submitText:"Save"}}),{c(){q(r.$$.fragment)},l(e){M(r.$$.fragment,e)},m(e,a){S(r,e,a),t=!0},p(e,a){const s={};a&8&&(s.initialValues=e[3]),r.$set(s)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){N(r,e)}}}function me(i){let r,t,e=i[1].error.message+"",a;return{c(){r=L("p"),t=I("Oh no... "),a=I(e)},l(s){r=O(s,"P",{});var f=P(r);t=w(f,"Oh no... "),a=w(f,e),f.forEach(l)},m(s,f){E(s,r,f),b(r,t),b(r,a)},p(s,f){f&2&&e!==(e=s[1].error.message+"")&&A(a,e)},i:y,o:y,d(s){s&&l(r)}}}function le(i){let r,t;return{c(){r=L("p"),t=I("Loading...")},l(e){r=O(e,"P",{});var a=P(r);t=w(a,"Loading..."),a.forEach(l)},m(e,a){E(e,r,a),b(r,t)},p:y,i:y,o:y,d(e){e&&l(r)}}}function $e(i){let r,t,e,a;const s=[le,me,de],f=[];function $(n,c){return n[1].fetching?0:n[1].error?1:2}return r=$(i),t=f[r]=s[r](i),{c(){t.c(),e=T()},l(n){t.l(n),e=T()},m(n,c){f[r].m(n,c),E(n,e,c),a=!0},p(n,c){let u=r;r=$(n),r===u?f[r].p(n,c):(k(),h(f[u],1,1,()=>{f[u]=null}),j(),t=f[r],t?t.p(n,c):(t=f[r]=s[r](n),t.c()),g(t,1),t.m(e.parentNode,e))},i(n){a||(g(t),a=!0)},o(n){h(t),a=!1},d(n){f[r].d(n),n&&l(e)}}}function ce(i){let r,t;return r=new Y({props:{$$slots:{default:[$e]},$$scope:{ctx:i}}}),{c(){q(r.$$.fragment)},l(e){M(r.$$.fragment,e)},m(e,a){S(r,e,a),t=!0},p(e,a){const s={};a&522&&(s.$$scope={dirty:a,ctx:e}),r.$set(s)},i(e){t||(g(r.$$.fragment,e),t=!0)},o(e){h(r.$$.fragment,e),t=!1},d(e){N(r,e)}}}function ue(i){let r,t;return{c(){r=L("span"),t=I(i[2])},l(e){r=O(e,"SPAN",{});var a=P(r);t=w(a,i[2]),a.forEach(l)},m(e,a){E(e,r,a),b(r,t)},p(e,a){a&4&&A(t,e[2])},d(e){e&&l(r)}}}function pe(i){let r,t,e,a,s,f,$,n,c,u,d=!i[1].fetching&&!i[1].error&&i[1].data.mod&&D(i);f=new _({props:{$$slots:{default:[ce]},$$scope:{ctx:i}}});function p(o){i[7](o)}let x={$$slots:{default:[ue]},$$scope:{ctx:i}};return i[0]!==void 0&&(x.running=i[0]),n=new oe({props:x}),F.push(()=>G(n,"running",p)),{c(){d&&d.c(),r=T(),t=z(),e=L("h1"),a=I("Edit Mod"),s=z(),q(f.$$.fragment),$=z(),q(n.$$.fragment),this.h()},l(o){const m=J('[data-svelte="svelte-q8g25b"]',document.head);d&&d.l(m),r=T(),m.forEach(l),t=C(o),e=O(o,"H1",{class:!0});var v=P(e);a=w(v,"Edit Mod"),v.forEach(l),s=C(o),M(f.$$.fragment,o),$=C(o),M(n.$$.fragment,o),this.h()},h(){K(e,"class","text-4xl my-4 font-bold")},m(o,m){d&&d.m(document.head,null),b(document.head,r),E(o,t,m),E(o,e,m),b(e,a),E(o,s,m),S(f,o,m),E(o,$,m),S(n,o,m),u=!0},p(o,[m]){!o[1].fetching&&!o[1].error&&o[1].data.mod?d?(d.p(o,m),m&2&&g(d,1)):(d=D(o),d.c(),g(d,1),d.m(r.parentNode,r)):d&&(k(),h(d,1,1,()=>{d=null}),j());const v={};m&522&&(v.$$scope={dirty:m,ctx:o}),f.$set(v);const V={};m&516&&(V.$$scope={dirty:m,ctx:o}),!c&&m&1&&(c=!0,V.running=o[0],Q(()=>c=!1)),n.$set(V)},i(o){u||(g(d),g(f.$$.fragment,o),g(n.$$.fragment,o),u=!0)},o(o){h(d),h(f.$$.fragment,o),h(n.$$.fragment,o),u=!1},d(o){d&&d.d(o),l(r),o&&l(t),o&&l(e),o&&l(s),N(f,o),o&&l($),N(n,o)}}}const Pe=re();function ge(i,r,t){let e,a,{modId:s}=r,f="",$=!1;const n=R(te,{mod:s});U(i,n,p=>t(1,a=p));const c=W({query:ae}),u=p=>{c({modId:ee(n).data.mod.id,mod:p}).then(x=>{x.error?(console.error(x.error.message),t(2,f="Error editing mod: "+x.error.message),t(0,$=!0)):ie(se+"/mod/"+x.data.updateMod.id)})};X(n);function d(p){$=p,t(0,$)}return i.$$set=p=>{"modId"in p&&t(6,s=p.modId)},i.$$.update=()=>{i.$$.dirty&1&&($||t(2,f="")),i.$$.dirty&2&&t(3,e=a.data?{...a.data.mod,logo:void 0}:void 0)},[$,a,f,e,n,u,s,d]}class Ve extends B{constructor(r){super(),H(this,r,ge,pe,Z,{modId:6})}}export{Ve as default,Pe as load};
//# sourceMappingURL=edit.svelte-b4154af7.js.map
