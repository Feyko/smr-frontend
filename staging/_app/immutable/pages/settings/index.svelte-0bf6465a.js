import{S as et,i as at,s as rt,ba as st,u as K,ad as Q,W as k,a as T,e as w,aa as _,aT as nt,X as B,f as u,g as U,c as E,d as S,ab as j,a7 as x,Y as H,j as b,a5 as d,ae as Z,m as P,t as I,$ as J,al as lt,aB as it,bb as ot,r as F,q as ft,b as Y,k as $t,l as ut,ac as O,aH as ct,J as mt}from"../../chunks/vendor-5142eec8.js";import{J as pt}from"../../chunks/graphql-cad820f4.js";import{T as gt}from"../../chunks/Toast-e8354faa.js";import{g as dt}from"../../chunks/navigation-ce539261.js";import{o as ht,a as vt,b as xt,s as yt,c as wt,v as Et,r as St,V as G,T as bt}from"../../chunks/forms-b07cb9c7.js";import{t as At}from"../../chunks/forms-43f5c2ea.js";import{a as Pt}from"../../chunks/user-d4c6e855.js";import{b as It}from"../../chunks/paths-1c47712a.js";import{M as Vt}from"../../chunks/MetaDescriptors-2c89eebb.js";import"../../chunks/singletons-cdeec3fd.js";import"../../chunks/stores-8521e192.js";function Nt(l){let t,e,a,r,i,$,c,n,m,h,v,g,s,p,o,V,A,D,C,M,R;m=new G({props:{for:"avatar",$$slots:{default:[Dt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}});function tt(f){l[7](f)}let W={label:"Username",required:!0};return l[5].username!==void 0&&(W.value=l[5].username),g=new bt({props:W}),K.push(()=>Q(g,"value",tt)),o=new G({props:{for:"username",$$slots:{default:[Tt,({messages:f})=>({10:f}),({messages:f})=>f?1024:0]},$$scope:{ctx:l}}}),D=new ct({props:{type:"submit",variant:"outlined",$$slots:{default:[Ut]},$$scope:{ctx:l}}}),{c(){t=w("form"),e=w("div"),a=w("div"),r=w("label"),i=_("Avatar:"),$=T(),c=w("input"),n=T(),k(m.$$.fragment),h=T(),v=w("div"),k(g.$$.fragment),p=T(),k(o.$$.fragment),V=T(),A=w("div"),k(D.$$.fragment),this.h()},l(f){t=E(f,"FORM",{});var y=S(t);e=E(y,"DIV",{class:!0});var N=S(e);a=E(N,"DIV",{class:!0});var q=S(a);r=E(q,"LABEL",{for:!0});var z=S(r);i=j(z,"Avatar:"),z.forEach(u),$=U(q),c=E(q,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),n=U(q),B(m.$$.fragment,q),q.forEach(u),h=U(N),v=E(N,"DIV",{class:!0});var L=S(v);B(g.$$.fragment,L),p=U(L),B(o.$$.fragment,L),L.forEach(u),V=U(N),A=E(N,"DIV",{});var X=S(A);B(D.$$.fragment,X),X.forEach(u),N.forEach(u),y.forEach(u),this.h()},h(){x(r,"for","avatar"),x(c,"id","avatar"),x(c,"class","base-input"),x(c,"name","avatar"),x(c,"type","file"),x(c,"accept","image/png,image/jpeg,image/gif"),x(c,"placeholder","Avatar"),x(a,"class","grid grid-flow-row gap-2"),x(v,"class","grid grid-flow-row gap-2"),x(e,"class","grid grid-flow-row gap-6")},m(f,y){b(f,t,y),d(t,e),d(e,a),d(a,r),d(r,i),d(a,$),d(a,c),d(a,n),H(m,a,null),d(e,h),d(e,v),H(g,v,null),d(v,p),H(o,v,null),d(e,V),d(e,A),H(D,A,null),C=!0,M||(R=mt(l[3].call(null,t)),M=!0)},p(f,y){const N={};y&3072&&(N.$$scope={dirty:y,ctx:f}),m.$set(N);const q={};!s&&y&32&&(s=!0,q.value=f[5].username,Z(()=>s=!1)),g.$set(q);const z={};y&3072&&(z.$$scope={dirty:y,ctx:f}),o.$set(z);const L={};y&2048&&(L.$$scope={dirty:y,ctx:f}),D.$set(L)},i(f){C||(P(m.$$.fragment,f),P(g.$$.fragment,f),P(o.$$.fragment,f),P(D.$$.fragment,f),C=!0)},o(f){I(m.$$.fragment,f),I(g.$$.fragment,f),I(o.$$.fragment,f),I(D.$$.fragment,f),C=!1},d(f){f&&u(t),J(m),J(g),J(o),J(D),M=!1,R()}}}function qt(l){let t,e;return{c(){t=w("p"),e=_("Please log in")},l(a){t=E(a,"P",{});var r=S(t);e=j(r,"Please log in"),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p:F,i:F,o:F,d(a){a&&u(t)}}}function Dt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=_(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=j(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&O(a,e)},d(r){r&&u(t)}}}function Tt(l){let t,e=(l[10]||"")+"",a;return{c(){t=w("span"),a=_(e),this.h()},l(r){t=E(r,"SPAN",{class:!0});var i=S(t);a=j(i,e),i.forEach(u),this.h()},h(){x(t,"class","validation-message")},m(r,i){b(r,t,i),d(t,a)},p(r,i){i&1024&&e!==(e=(r[10]||"")+"")&&O(a,e)},d(r){r&&u(t)}}}function Ut(l){let t;return{c(){t=_("Save")},l(e){t=j(e,"Save")},m(e,a){b(e,t,a)},d(e){e&&u(t)}}}function kt(l){let t,e,a,r;const i=[qt,Nt],$=[];function c(n,m){return n[1]===null?0:1}return t=c(l),e=$[t]=i[t](l),{c(){e.c(),a=Y()},l(n){e.l(n),a=Y()},m(n,m){$[t].m(n,m),b(n,a,m),r=!0},p(n,m){let h=t;t=c(n),t===h?$[t].p(n,m):($t(),I($[h],1,1,()=>{$[h]=null}),ut(),e=$[t],e?e.p(n,m):(e=$[t]=i[t](n),e.c()),P(e,1),e.m(a.parentNode,a))},i(n){r||(P(e),r=!0)},o(n){I(e),r=!1},d(n){$[t].d(n),n&&u(a)}}}function Bt(l){let t,e;return t=new ot({props:{$$slots:{default:[kt]},$$scope:{ctx:l}}}),{c(){k(t.$$.fragment)},l(a){B(t.$$.fragment,a)},m(a,r){H(t,a,r),e=!0},p(a,r){const i={};r&2082&&(i.$$scope={dirty:r,ctx:a}),t.$set(i)},i(a){e||(P(t.$$.fragment,a),e=!0)},o(a){I(t.$$.fragment,a),e=!1},d(a){J(t,a)}}}function Ht(l){let t,e;return{c(){t=w("span"),e=_(l[2])},l(a){t=E(a,"SPAN",{});var r=S(t);e=j(r,l[2]),r.forEach(u)},m(a,r){b(a,t,r),d(t,e)},p(a,r){r&4&&O(e,a[2])},d(a){a&&u(t)}}}function Jt(l){let t,e,a,r,i,$,c,n,m,h;t=new Vt({props:{description:"Change your user settings",title:"Settings"}}),$=new st({props:{$$slots:{default:[Bt]},$$scope:{ctx:l}}});function v(s){l[8](s)}let g={$$slots:{default:[Ht]},$$scope:{ctx:l}};return l[0]!==void 0&&(g.running=l[0]),n=new gt({props:g}),K.push(()=>Q(n,"running",v)),{c(){k(t.$$.fragment),e=T(),a=w("h1"),r=_("Settings"),i=T(),k($.$$.fragment),c=T(),k(n.$$.fragment),this.h()},l(s){const p=nt('[data-svelte="svelte-1ae5i2c"]',document.head);B(t.$$.fragment,p),p.forEach(u),e=U(s),a=E(s,"H1",{class:!0});var o=S(a);r=j(o,"Settings"),o.forEach(u),i=U(s),B($.$$.fragment,s),c=U(s),B(n.$$.fragment,s),this.h()},h(){x(a,"class","text-4xl my-4 font-bold")},m(s,p){H(t,document.head,null),b(s,e,p),b(s,a,p),d(a,r),b(s,i,p),H($,s,p),b(s,c,p),H(n,s,p),h=!0},p(s,[p]){const o={};p&2082&&(o.$$scope={dirty:p,ctx:s}),$.$set(o);const V={};p&2052&&(V.$$scope={dirty:p,ctx:s}),!m&&p&1&&(m=!0,V.running=s[0],Z(()=>m=!1)),n.$set(V)},i(s){h||(P(t.$$.fragment,s),P($.$$.fragment,s),P(n.$$.fragment,s),h=!0)},o(s){I(t.$$.fragment,s),I($.$$.fragment,s),I(n.$$.fragment,s),h=!1},d(s){J(t),s&&u(e),s&&u(a),s&&u(i),J($,s),s&&u(c),J(n,s)}}}function Lt(l,t,e){let a,r,i=F,$=()=>(i(),i=ft(g,o=>e(5,r=o)),g);lt(l,Pt,o=>e(1,a=o)),l.$$.on_destroy.push(()=>i());let c="",n=!1;const m=it({query:pt}),h=ht({avatar:vt(xt().refine(o=>"name"in o&&"size"in o&&"type"in o)),username:yt().min(3).max(32)});let v,g;function s(o){l.$$.not_equal(r.username,o)&&(r.username=o,g.set(r))}function p(o){n=o,e(0,n),e(1,a)}return l.$$.update=()=>{if(l.$$.dirty&2&&a){const o=wt({initialValues:{username:a.username},extend:[Et({schema:h}),St],onSubmit:V=>{m({user:At(V,h),userId:a.id}).then(A=>{A.error?(console.error(A.error.message),e(2,c="Error editing guide: "+A.error.message),e(0,n=!0)):dt(It+"/user/"+A.data.updateUser.id)})}});e(3,v=o.form),$(e(4,g=o.data))}l.$$.dirty&1&&(n||e(2,c=""))},[n,a,c,v,g,r,h,s,p]}class Gt extends et{constructor(t){super(),at(this,t,Lt,Jt,rt,{userSchema:6})}get userSchema(){return this.$$.ctx[6]}}export{Gt as default};
//# sourceMappingURL=index.svelte-0bf6465a.js.map
